var a,b;a=this,b=function(){"use strict";function a(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(){function n(e){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=e||{})&&e.container&&this.initValues(e).renderMainContainer().initListeners()}var e,t,i;return e=n,(t=[{key:"initValues",value:function(e){return this.emails={},this.onChange=e.onChange,this.container=e.container,this.onGetCount=e.onGetCount,this}},{key:"getEmails",value:function(){return Object.keys(this.emails)}},{key:"setEmails",value:function(e){var t=this;if(e&&e.length){var n=e.reduce(function(e,n){return t.isValidEmail(e)&&(n.append(e),t.emails[e]=!0),n},[]);this.renderEmails(n.list)}}},{key:"dispatchOnChange",value:function(){return this}},{key:"initListeners",value:function(){var l=this,e=this.container,n=e.querySelector("input"),t=e.querySelector(".ballons-container"),i=e.querySelector(".btn-count"),s=13,c=188;return n.addEventListener("paste",function(e){var n=e||{},t=n.currentTarget,i=n.clipboardData.getData("text");l.renderEmails(t.value+i).cleanInput(),e.preventDefault()}),n.addEventListener("keyup",function(e){var n=e||{},t=n.keyCode,i=n.currentTarget,a=n.ctrlKey,r=n.metaKey;if(t===c||t===s){var o=Object.keys(l.emails);l.renderEmails(i.value).dispatchOnChange(o,i.value).cleanInput()}return!r&&!a&&e}),t.addEventListener("click",function(e){var n="remove-icon-svg"===e.target.getAttribute("class")?e.target.parentElement:e.target;"remove-icon"===n.className&&("invalid ballon"!==n.parentElement.className&&delete l.emails[n.parentElement.getAttribute("data-email")],t.removeChild(n.parentElement))}),this.onGetCount&&this.onGetCount instanceof Function&&i.addEventListener("click",function(){var e=Object.keys(l.emails);l.onGetCount(e.length)}),this}},{key:"renderEmailBlock",value:function(e,n){var t=document.createElement("div");return t.className=n?"ballon":"invalid ballon",t.innerHTML="".concat(e,' <div class="remove-icon">').concat('<svg class="remove-icon-svg" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.8L7.2 0L4 3.2L0.8 0L0 0.8L3.2 4L0 7.2L0.8 8L4 4.8L7.2 8L8 7.2L4.8 4L8 0.8Z" fill="#050038"/>\n</svg>',"</div>"),t.setAttribute("data-email",n?e:""),t}},{key:"isValidEmail",value:function(e){return!!/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g.exec(e)}},{key:"renderEmails",value:function(e,n){var t=this,i=n||(e||"").split(","),a=document.createDocumentFragment();i.map(function(e){if((e+"").trim()){var n=t.isValidEmail(e);a.appendChild(t.renderEmailBlock(e,n)),n&&(t.emails[e]=!0)}});var r=this.container.querySelector(".input-container");return this.container.querySelector(".ballons-container").insertBefore(a,r),this}},{key:"cleanInput",value:function(){return this.container.querySelector("input").value="",this}},{key:"renderMainContainer",value:function(){return this.container.innerHTML='\n      <div class="container">\n        <div class="top">\n          <h1>Share <strong>Board name</strong> with others</h1>\n          <div class="text-container">\n            <div class="ballons-container">\n              <div class="input-container"><input placeholder="add more people..."/></div>\n            </div>\n          </div>\n        </div>\n        <div class="bottom">\n          <button>\n            Add email\n          </button>  \n          <button class="btn-count">\n            Get emails count\n          </button>\n        </div>\n      </div>\n    ',this}}])&&a(e.prototype,t),i&&a(e,i),n}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.emailsEditor=b();
//# sourceMappingURL=EmailsEditor.min.js.map
