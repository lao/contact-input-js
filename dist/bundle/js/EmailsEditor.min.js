var a,b;a=this,b=function(){"use strict";function a(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}return function(){function n(e){if(!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),!(e=e||{})||!e.container)throw new Error("invalid config exiting...");this.initValues(e).renderMainContainer().initListeners()}var e,t,i;return e=n,(t=[{key:"initValues",value:function(e){return this.emails=[],this.onChange=e.onChange,this.container=e.container,this.onGetCount=e.onGetCount,this}},{key:"getEmails",value:function(){return this.emails}},{key:"setEmails",value:function(e){var i=this;if(e){var n=e.reduce(function(e,n){var t=i.isValidEmail(n);return t&&e.push(t[0]),e},[]),t=u(this.emails);this.clearEmailBlocks().renderEmailBlocks(null,n).dispatchOnChange(t)}}},{key:"clearEmailBlocks",value:function(){return this.emails=[],this.container.querySelectorAll(".ballon").forEach(function(e){return e.remove()}),this}},{key:"dispatchOnChange",value:function(e){return this.onChange instanceof Function&&this.onChange(e,this.emails),this}},{key:"initListeners",value:function(){var l=this,e=this.container,n=e.querySelector("input"),i=e.querySelector(".ballons-container"),t=e.querySelector(".btn-count"),a=e.querySelector(".btn-add-random"),c=13,s=188;return n.addEventListener("paste",function(e){var n=e||{},t=n.currentTarget,i=n.clipboardData.getData("text"),a=u(l.emails);l.renderEmailBlocks(t.value+i).dispatchOnChange(a).cleanInput(),e.preventDefault()}),n.addEventListener("keyup",function(e){var n=e||{},t=n.keyCode,i=n.currentTarget,a=n.ctrlKey,r=n.metaKey;if(t===s||t===c){var o=u(l.emails);l.renderEmailBlocks(i.value).dispatchOnChange(o).cleanInput()}return!r&&!a&&e}),i.addEventListener("click",function(e){var n="remove-icon-svg"===e.target.getAttribute("class")?e.target.parentElement:e.target;if("remove-icon"===n.className){if("invalid ballon"!==n.parentElement.className){var t=u(l.emails);l.emails.splice(l.emails.indexOf(n.parentElement.getAttribute("data-email")),1),l.dispatchOnChange(t)}i.removeChild(n.parentElement)}}),this.onGetCount&&this.onGetCount instanceof Function&&t.addEventListener("click",function(){l.onGetCount(l.emails.length)}),a.addEventListener("click",function(){var e="some".concat((new Date).getTime(),"@random.com");l.renderEmailBlocks(e)}),this}},{key:"renderEmailBlock",value:function(e,n){var t=document.createElement("div");return t.className=n?"ballon":"invalid ballon",t.innerHTML="".concat(n?e:"<span>".concat(e,"</span>"),' <div class="remove-icon">').concat('<svg class="remove-icon-svg" width="8" height="8" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M8 0.8L7.2 0L4 3.2L0.8 0L0 0.8L3.2 4L0 7.2L0.8 8L4 4.8L7.2 8L8 7.2L4.8 4L8 0.8Z" fill="#050038"/>\n</svg>',"</div>"),t.setAttribute("data-email",n?e:""),t}},{key:"isValidEmail",value:function(e){return/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/g.exec(e)}},{key:"renderEmailBlocks",value:function(e,n){var t=this,i=n||(e||"").split(","),a=document.createDocumentFragment();i.map(function(e){if(e=(e+"").trim()){var n=t.isValidEmail(e);a.appendChild(t.renderEmailBlock(e,n)),n&&t.emails.push(e)}});var r=this.container.querySelector(".input-container");return this.container.querySelector(".ballons-container").insertBefore(a,r),this}},{key:"cleanInput",value:function(){return this.container.querySelector("input").value="",this}},{key:"renderMainContainer",value:function(){return this.container.innerHTML='\n      <div class="container">\n        <div class="top">\n          <h1>Share <strong>Board name</strong> with others</h1>\n          <div class="text-container">\n            <div class="ballons-container">\n              <div class="input-container"><input placeholder="add more people..."/></div>\n            </div>\n          </div>\n        </div>\n        <div class="bottom">\n          <button class="btn-add-random">\n            Add email\n          </button>  \n          <button class="btn-count">\n            Get emails count\n          </button>\n        </div>\n      </div>\n    ',this}}])&&a(e.prototype,t),i&&a(e,i),n}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.emailsEditor=b();
//# sourceMappingURL=EmailsEditor.min.js.map
